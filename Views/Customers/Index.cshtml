
@model Jindo_Capstone.Models.CustomerViewModel
@{
    ViewBag.Title = "Nifty Notif";
}
<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <link href="~/Content/bootstrap.min.css" rel="stylesheet" />
    <title></title>
</head>
<body>
    <div class="container">

        <!-- Form used for the batch submit-->
        <form action="/Customers/BatchSubmit" method="post">

            <table class="table">
                <thead class="thead-dark">
                    <tr>
                        <th scope="col">Message</th>
                        <th scope="col">Contact Name</th>
                        <th scope="col">Phone</th>
                        <th scope="col">Address</th>
                        <th scope="col">LastMessaged</th>
                        <!-- Table Header - Contains the Submit Batch Button -->
                        <th scope="col"><input type="submit" value="Submit batch" /></th>
                    </tr>
                </thead>

                
                @if (Model != null)
                {

                    for (var i = 0; i < Model.Customers.Count; i++)
                    {
                        <tr id="@Model.Customers[i].CustID">
                            <td>
                                <button onclick="location.href='@Url.Action("Send", "Customers", new { @id = Model.Customers[i].CustID })'" class="btn btn-primary">Send Message</button>
                            </td>
                            <td>@Model.Customers[i].ContactName</td>
                            <td>@Model.Customers[i].PhoneNumber</td>
                            <td>@Model.Customers[i].ShippingAddress</td>
                            <td>@(Model.Customers[i].LastMessaged?.ToString("MM/dd/yyyy h:mm tt")) </td>

                            <!-- Checkboxes generated for the form -->
                            <td>
                                @Html.CheckBoxFor(m => @Model.Customers[i].IsChecked)
                                @Model.Customers[i].ContactName
                                @Html.HiddenFor(m => Model.Customers[i].CustID)
                                @Html.HiddenFor(m => Model.Customers[i].ContactName)
                            </td>
                        </tr>
                    }
                }
            </table>
        </form>
    </div>
</body>
</html>
